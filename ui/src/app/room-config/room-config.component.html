<div class="room-info-container">
    <mat-card style="border-right: 1px solid lightgray; border-radius: 0px;" class="main-card">
        <mat-card-content class="images-contianer">
            <div class="carousel-wrapper">
                <ngb-carousel #carousel [interval]="5000" [pauseOnHover]="pauseOnHover" [pauseOnFocus]="pauseOnFocus" (slide)="onSlide($event)">
                    <ng-template ngbSlide *ngFor="let img of images; index as i">
                        <div class="picsum-img-wrapper">
                            <img class="room-img" [src]="img" alt="Image {{i + 1}}" (click)="deleteImage(i)">
                        </div>
                    </ng-template>
                </ngb-carousel>
            </div>
            <div class="button-wrapper">
                <button mat-icon-button color="primary" class="img-add-button" (click)="addImage()"><mat-icon class="add-icon">add</mat-icon></button>
            </div>
        </mat-card-content>
        <mat-card-content>
            <h3>Private Notes</h3>
            <mat-form-field class="text-wrapper" appearance="outline">
                <textarea matInput rows="4" placeholder="description" [(ngModel)]="room.privateDescription"></textarea>
            </mat-form-field>
        </mat-card-content>
        <mat-card-content>
            <h3>Public Notes</h3>
            <mat-form-field class="text-wrapper" appearance="outline">
                <textarea matInput rows="4" placeholder="description" [(ngModel)]="room.publicDescription"></textarea>
            </mat-form-field>
        </mat-card-content>
        <mat-card-content class="room-details">
            <div class="details-container">
                <h3>Furniture List</h3>
                <ul>
                    <li *ngFor="let f of furniture | keyvalue">
                        <mat-checkbox [(ngModel)]="f.value" color="primary">{{f.key}}</mat-checkbox>
                    </li>
                </ul>
            </div>
            <div class="details-container">
                <h3>Room Type</h3>
                <mat-form-field class="select-field">
                    <mat-select [(value)]="roomType">
                        <mat-option *ngFor="let t of roomTypes" [value]="t">{{t}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <h3>Funding Type</h3>
                <mat-form-field class="select-field">
                    <mat-select [(value)]="fundingType">
                        <mat-option *ngFor="let t of fundingTypes" [value]="t">{{t}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </mat-card-content>
    </mat-card>
    <mat-card class="main-card">
        <mat-card-content class="config-section systems-section">
            <h3>Connected Systems</h3>
            <div class="list-wrapper">
                <table mat-table [dataSource]="systemsData">

                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef> System Name </th>
                        <td mat-cell *matCellDef="let sys"> {{sys.name}} </td>
                    </ng-container>

                    <ng-container matColumnDef="install">
                        <th mat-header-cell *matHeaderCellDef> Install Date </th>
                        <td mat-cell *matCellDef="let sys"> {{sys.installDate | date:'MM-dd-yyyy'}} </td>
                    </ng-container>

                    <ng-container matColumnDef="check">
                        <th mat-header-cell *matHeaderCellDef> Latest Check </th>
                        <td mat-cell *matCellDef="let sys">
                            <div class="final-column-container">
                                {{sys.checkDate | date:'MM-dd-yyyy'}}
                                <button mat-icon-button (click)="navigateToSystem($event, sys)"><mat-icon>navigate_next</mat-icon></button>
                            </div>
                        </td>
                    </ng-container>
                    
                    <tr mat-header-row *matHeaderRowDef="systemColumns;"></tr>
                    <tr mat-row *matRowDef="let sys; columns: systemColumns;" class="table-row" (click)="addSystem(sys)"></tr>
                </table>
            </div>
            <button mat-stroked-button color="primary" class="system-button" (click)="addSystem(null)">Add System</button>
        </mat-card-content>
        <mat-card-content class="config-section">
            <h3>Devices</h3>
            <div class="list-wrapper">
                <table mat-table [dataSource]="deviceData">

                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef> Device Name </th>
                        <td mat-cell *matCellDef="let dev"><div class="device-name-container"><mat-icon>{{dev.icon}}</mat-icon><p>{{dev.name}}</p></div></td>
                    </ng-container>

                    <ng-container matColumnDef="install">
                        <th mat-header-cell *matHeaderCellDef> Install </th>
                        <td mat-cell *matCellDef="let dev"> {{dev.installDate | date:'MM-dd-yyyy'}} </td>
                    </ng-container>

                    <ng-container matColumnDef="address">
                        <th mat-header-cell *matHeaderCellDef> Address </th>
                        <td mat-cell *matCellDef="let dev"> {{dev.address}} </td>
                    </ng-container>
                    
                    <tr mat-header-row *matHeaderRowDef="deviceColumns;"></tr>
                    <tr mat-row *matRowDef="let dev; columns: deviceColumns;" class="table-row" (click)="addDevice(dev)"></tr>
                </table>
            </div>
            <button mat-stroked-button color="primary" class="system-button" (click)="addDevice(null)">Add Device</button>
        </mat-card-content>
    </mat-card>
</div>

